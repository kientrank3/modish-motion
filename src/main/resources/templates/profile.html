<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <div th:replace="components/head :: head"></div>
    <title>Hồ Sơ Của Tôi</title>
</head>
<body class="bg-gray-100" data-theme="light">
<header th:replace="components/header"></header>
<div class="container mx-auto my-10 pt-10" >
    <div class="flex space-x-6">
        <div class="w-1/4 bg-gray-100 p-4">
            <div class="flex items-center space-x-4 mb-6">
                <img th:src="@{/images/profile/hamburmeo.jfif}" alt="avatar" class="rounded-full w-14 h-14">
                <div>
                    <div>
                        <p th:text="'Welcome, ' + ${user.username}"></p>
                    </div>
                    <p class="text-gray-800 font-bold"></p>
                    <a href="#" class="text-blue-500 text-sm hover:underline">Sửa Hồ Sơ</a>
                </div>
            </div>
            <ul class="text-lg text-gray-600 gap-2">
                <li class="py-2">
                    <a href="#" th:onclick="|window.location.href='@{/profile?tab=profile}'|" class="flex items-center" th:classappend="${selectedTab == 'profile'} ? 'text-red-500' : ''">Hồ Sơ</a>
                </li>
<!--                <li class="py-2 border-b border-gray-200">-->
<!--                    <a href="#" th:onclick="|window.location.href='@{/profile?tab=bank}'|" class="flex items-center" th:classappend="${selectedTab == 'bank'} ? 'text-red-500' : ''">Ngân Hàng</a>-->
<!--                </li>-->
                <li class="py-2">
                    <a href="#" th:onclick="|window.location.href='@{/profile?tab=address}'|" class="flex items-center" th:classappend="${selectedTab == 'address'} ? 'text-red-500' : ''">Địa Chỉ</a>
                </li>
                <li class="py-2">
                    <a href="#" th:onclick="|window.location.href='@{/profile?tab=password}'|" class="flex items-center" th:classappend="${selectedTab == 'password'} ? 'text-red-500' : ''">Đổi Mật Khẩu</a>
                </li>
                <li class="py-2">
                    <a href="#" th:onclick="|window.location.href='@{/profile?tab=orders}'|" class="flex items-center" th:classappend="${selectedTab == 'orders'} ? 'text-red-500' : ''">Đơn Mua</a>
                </li>
            </ul>
        </div>

        <!-- Profile Content -->
        <div class="w-3/4 bg-white p-6">
            <div th:if="${selectedTab == 'profile'}">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Hồ Sơ Của Tôi</h2>
                <p class="text-gray-500 mb-6">Quản lý thông tin hồ sơ để bảo mật tài khoản</p>
                <div class="grid grid-cols-4 gap-4">
                    <!-- Profile Form -->
                    <div class="col-span-2">
                        <form>
                            <div class="mb-4">
                                <label for="username" class="block text-sm font-semi bold text-gray-600">Tên đăng nhập</label>
                                <p id="username" class="text-gray-800" th:text="${user.username}"></p>
                            </div>
                            <div class="mb-4">
                                <label for="name" class="block text-sm font-semi bold text-gray-600">Tên</label>
                                <p  id="name" class="text-gray-800" th:text="${user.user.name}"></p>
                            </div>
                            <div class="mb-4">
                                <label for="email" class="block text-sm font-semi bold text-gray-600">Email</label>
                                <p id="email" class="text-gray-800" th:text="${user.user.email}"> <a href="#" class="text-blue-500 text-sm hover:underline">Thay Đổi</a></p>
                            </div>
                            <div class="mb-4">
                                <label for="phone" class="block text-sm font-semi bold text-gray-600">Số điện thoại</label>
                                <p id="phone" class="text-gray-800" th:text="${user.user.phoneNumber}"> <a href="#" class="text-blue-500 text-sm hover:underline">Thay Đổi</a></p>
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-semi bold text-gray-600">Giới tính</label>
                                <div class="flex items-center space-x-4">
                                    <label class="inline-flex items-center">
                                        <input type="radio" name="gender" class="form-radio text-blue-500"
                                               th:checked="${user.user.gender == false}">
                                        <span class="ml-2">Nam</span>
                                    </label>
                                    <label class="inline-flex items-center">
                                        <input type="radio" name="gender" class="form-radio text-blue-500"
                                               th:checked="${user.user.gender == true}">
                                        <span class="ml-2">Nữ</span>
                                    </label>
                                </div>
                            </div>
                            <div class="mb-4">
                                <label for="dob" class="block text-sm font-semi bold text-gray-600">Ngày sinh</label>
                                <p id="dob" class="text-gray-800" th:text="${user.user.getDob()}"> <a href="#" class="text-blue-500 text-sm hover:underline">Thay Đổi</a></p>
                            </div>
                            <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">Lưu</button>
                        </form>
                    </div>

                    <!-- Profile Picture -->
                    <div class="flex flex-col items-center">
                        <img th:src="@{/images/profile/hamburmeo.jfif}" alt="avatar" class="rounded-full w-32 h-32 mb-4">
                        <button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg">Chọn Ảnh</button>
                        <p class="text-gray-500 text-sm mt-4">Dung lượng file tối đa 1 MB</p>
                        <p class="text-gray-500 text-sm">Định dạng: .JPEG, .PNG</p>
                    </div>
                </div>

            </div>


<!--            <div th:if="${selectedTab == 'bank'}">-->
<!--                <h2 class="text-2xl font-bold text-gray-800 mb-2">Ngân Hàng</h2>-->
<!--                &lt;!&ndash; Nội dung Ngân Hàng ở đây &ndash;&gt;-->
<!--            </div>-->

            <!-- Địa Chỉ -->
            <div th:if="${selectedTab == 'address'}">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Địa Chỉ</h2>
                    <button class="bg-blue-300 text-white px-4 py-2 rounded" onclick="openAddAddressModal()">
                        + Thêm địa chỉ mới
                    </button>
                </div>

<!--                <div class="address-container bg-gray-100 p-6 min-h-screen">-->
                    <div class="max-w-4xl mx-auto bg-white border-t border-gray-300 p-6">
                        <!-- Tiêu đề -->
                        <div class="flex justify-between items-center mb-6">
                            <h1 class="text-xl font-bold">Địa chỉ của tôi</h1>

                        </div>
                        <!-- Danh sách địa chỉ -->
                        <div class="address-list space-y-6">
                            <!-- Địa chỉ -->
                            <div class="address-item border-b pb-4">
                                <div class="text-lg font-bold" th:text="${user.user.name}"></div>
                                <div class="text-gray-600" th:text="${user.user.address}"></div>
                                <div class="text-gray-500" th:text="${user.user.phoneNumber}"></div>
                                <div class="flex gap-4 mt-2">
                                    <span class="text-red-500 font-semibold">Mặc định</span>
                                    <a href="#" class="text-blue-500" onclick="editAddress()">Cập nhật</a>
                                </div>
                            </div>
                        </div>
                    </div>
<!--                </div>-->

            </div>

            <!-- Đổi Mật Khẩu -->
            <div th:if="${selectedTab == 'password'}">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Đổi Mật Khẩu</h2>
                <p class="text-gray-500 mb-6">Để bảo mật tài khoản, vui lòng không chia sẻ mật khẩu cho người khác</p>

                <form class="w-full">
                    <div class="mb-4 flex items-center">
                        <label for="oldPassword" class="w-1/4 text-gray-600 text-right mr-4"> Mật khẩu cũ</label>
                        <div class="flex items-center gap-2 input input-bordered w-2/4">
                            <input type="password" class="grow w-full" id="oldPassword" />
                            <i id="toggleOldPassword" data-lucide="eye-closed" class="w-4 h-4 cursor-pointer"
                               onclick="togglePasswordVisibility('oldPassword', 'toggleOldPassword')"></i>
                        </div>
                    </div>

                    <div class="mb-4 flex items-center">
                        <label for="newPassword" class="w-1/4 text-gray-600 text-right mr-4">Mật khẩu mới</label>
                        <div class="flex items-center gap-2 input input-bordered w-2/4">
                            <input type="password" class="grow w-full" id="newPassword" />
                            <i id="toggleNewPassword" data-lucide="eye-closed" class="w-4 h-4 cursor-pointer"
                               onclick="togglePasswordVisibility('newPassword', 'toggleNewPassword')"></i>
                        </div>
                    </div>

                    <div class="mb-4 flex items-center">
                        <label for="confirmPassword" class="w-1/4 text-gray-600 text-right mr-4">Nhập lại mật khẩu mới</label>
                        <div class="flex items-center gap-2 input input-bordered w-2/4">
                            <input type="password" class="grow w-full" id="confirmPassword" />
                            <i id="toggleConfirmPassword" data-lucide="eye-closed" class="w-4 h-4 cursor-pointer"
                               onclick="togglePasswordVisibility('confirmPassword', 'toggleConfirmPassword')"></i>
                        </div>
                    </div>

                    <!-- Nút Lưu ở giữa -->
                    <div class="flex justify-center mt-6">
                        <button type="submit" class="bg-blue-300 text-white px-8 py-2 rounded-lg hover:bg-cyan-800 w-1/3 text-center">Đổi mật khẩu</button>
                    </div>
                </form>
            </div>


            <!-- Đơn Mua -->
            <div th:if="${selectedTab == 'orders'}">
                <div class="order-container bg-gray-100 p-6 min-h-screen">
                    <div class="max-w-6xl mx-auto bg-white rounded-lg shadow-md p-6">
                        <!-- Tabs -->
                        <div class="tabs flex border-b mb-6">
                            <button class="tab-item active" onclick="filterOrders('all')">Tất cả</button>
                            <button class="tab-item" onclick="filterOrders('pending')">Chờ thanh toán</button>
                            <button class="tab-item" onclick="filterOrders('shipping')">Vận chuyển</button>
                            <button class="tab-item" onclick="filterOrders('delivered')">Chờ giao hàng</button>
                            <button class="tab-item" onclick="filterOrders('completed')">Hoàn thành</button>
                            <button class="tab-item" onclick="filterOrders('cancelled')">Đã hủy</button>
                        </div>
                        <!-- Danh sách đơn hàng -->
                        <div id="orderList">
                            <!-- Đơn hàng mẫu -->
                            <div class="order-item border rounded-lg p-4 mb-4">
                                <div class="flex justify-between items-center">
                                    <div class="order-shop font-bold">Shop: Ôp Lưng iPhone - Siêu Tiện Ích</div>
                                    <div>
                                        <button class="bg-gray-100 px-4 py-2 rounded mr-2">Chat</button>
                                        <button class="bg-gray-100 px-4 py-2 rounded">Xem Shop</button>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <div class="flex">
                                        <img
                                                src="https://via.placeholder.com/100"
                                                alt="Product Image"
                                                class="w-20 h-20 object-cover rounded mr-4"
                                        />
                                        <div>
                                            <h3 class="font-bold">Ốp lưng iPhone nắp trượt tròn tranh sơn dầu</h3>
                                            <p class="text-sm text-gray-500">Phân loại hàng: Nhiều Hoa Nền Hồng, IP 7PLUS/8PLUS</p>
                                            <p class="text-sm text-gray-500">Số lượng: 1</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4 flex justify-between items-center">
                                    <div class="status text-green-500 font-bold">Giao hàng thành công</div>
                                    <div class="text-right">
                                        <p class="text-gray-500 line-through">30,000đ</p>
                                        <p class="text-red-500 font-bold">14,900đ</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Thêm các đơn hàng khác ở đây -->
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<div th:replace="/components/lucide_icons :: lucide_icon"></div>
<footer th:replace="components/footer"></footer>

<script>
    function togglePasswordVisibility(inputId, iconId) {
        const input = document.getElementById(inputId);
        const icon = document.getElementById(iconId);
        if (input.type === "password") {
            input.type = "text";
            icon.setAttribute("data-lucide", "eye");
        } else {
            input.type = "password";
            icon.setAttribute("data-lucide", "eye-closed");
        }
        lucide.createIcons();  // Để cập nhật biểu tượng sau khi thay đổi thuộc tính
    }

    function filterOrders(status) {
        const tabs = document.querySelectorAll('.tab-item');
        tabs.forEach((tab) => tab.classList.remove('active'));

        const activeTab = [...tabs].find((tab) => tab.textContent.toLowerCase().includes(status));
        if (activeTab) activeTab.classList.add('active');

        const orderList = document.getElementById('orderList');

        // Dữ liệu giả lập
        const orders = {
            all: [
                { id: 1, name: 'Ốp lưng iPhone nắp trượt', status: 'completed', price: '14,900đ' },
                { id: 2, name: 'Ốp lưng cute', status: 'pending', price: '29,900đ' }
            ],
            pending: [],
            shipping: [],
            completed: [
                { id: 1, name: 'Ốp lưng iPhone nắp trượt', status: 'completed', price: '14,900đ' }
            ],
            cancelled: []
        };

        orderList.innerHTML = '';

        if (orders[status].length === 0) {
            orderList.innerHTML = '<p class="text-center text-gray-500">Chưa có đơn hàng</p>';
            return;
        }

        orders[status].forEach((order) => {
            const itemHTML = `
            <div class="order-item">
                <h3 class="font-bold">${order.name}</h3>
                <p>${order.price}</p>
            </div>
        `;
            orderList.innerHTML += itemHTML;
        });
    }

</script>
</body>
</html>
